<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>network related things</title>
    <link rel="stylesheet" href="src/scanner/main.css">
    <link rel="stylesheet" href="src/settings/styles.css">
    <link rel="stylesheet" href="src/misc/styles.css">
    <link rel="stylesheet" href="src/bypass/styles.css">
    <link rel="stylesheet" href="src/history/styles.css">
    <link rel="stylesheet" href="src/visualizer/styles.css">
    <link rel="stylesheet" href="src/hotspot/styles.css">
    <link rel="stylesheet" href="src/home/styles.css">
    <link rel="stylesheet" href="src/updater/styles.css">
    <link rel="stylesheet" href="src/monitor/styles.css">
</head>
<body>
    <div class="nav-container">
        <nav class="nav-menu">
            <a href="#home" id="homeTab" class="nav-link">Home <span style="font-size: 0.7em; color: #999; font-weight: normal;">(new!)</span></a>
            
            <div class="nav-separator">Network Tools</div>
            <a href="#bypass" id="bypassTab" class="nav-link">Bypass</a>
            <a href="#hotspot" id="hotspotTab" class="nav-link">Hotspot</a>
            
            <div class="nav-separator">Analysis</div>
            <a href="#scanner" id="scannerTab" class="nav-link">Scanner</a>
            <a href="#monitor" id="monitorTab" class="nav-link">Monitor <span style="font-size: 0.7em; color: #999; font-weight: normal;">(new!)</span></a>
            <a href="#visualizer" id="visualizerTab" class="nav-link">Visualizer</a>
            
            <div class="nav-separator">System</div>
            <a href="#history" id="historyTab" class="nav-link">History</a>
            <a href="#updater" id="updaterTab" class="nav-link">Updater <span style="font-size: 0.7em; color: #999; font-weight: normal;">(new!)</span></a>
            <a href="#misc" id="miscTab" class="nav-link">Misc</a>
            <a href="#settings" id="settingsTab" class="nav-link">Settings</a>
        </nav>
    </div>

    <div class="container">
        <div id="homeView" class="view" style="display: block;">
            <h1>Welcome</h1>
            <div class="home-container">
                <div class="welcome-message">
                    <h2>Network related thing</h2>
                    <p>Bypass v3 with some extra networking related things (hence the name)</p>
                </div>
    
                <div class="home-section">
                    <h3 class="section-title">Your Activity</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon bypass-icon"></div>
                            <div class="stat-info">
                                <span class="stat-count" id="bypassCount">0</span>
                                <span class="stat-label">Bypasses</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon basic-scan-icon"></div>
                            <div class="stat-info">
                                <span class="stat-count" id="basicScanCount">0</span>
                                <span class="stat-label">Basic Scans</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon full-scan-icon"></div>
                            <div class="stat-info">
                                <span class="stat-count" id="fullScanCount">0</span>
                                <span class="stat-label">Full Scans</span>
                            </div>
                        </div>
                    </div>
                </div>                               
    
                
                <div class="home-section">
                    <h3 class="section-title">About You</h3>
                    <div class="about-container">
                        <div class="about-content system-info">
                            <div class="info-columns">    
                                <div class="info-column">
                                    <h4>Network</h4>
                                    <p><strong>Internal IP:</strong> <span id="internalIp">Loading...</span></p>
                                    <p><strong>External IP:</strong> <span id="externalIp" class="blurred-text">Loading...</span></p>
                                    <p><strong>MAC Address:</strong> <span id="macAddress" class="blurred-text">Loading...</span></p>
                                    <p><strong>ISP:</strong> <span id="ispName" class="blurred-text">Loading...</span></p>
                                </div>
                                <div class="info-column">
                                    <h4>Hardware</h4>
                                    <p><strong>CPU:</strong> <span id="cpuInfo">Loading...</span></p>
                                    <p><strong>GPU:</strong> <span id="gpuInfo">Loading...</span></p>
                                    <p><strong>Memory:</strong> <span id="memoryInfo">Loading...</span></p>
                                    <p><strong>Storage:</strong> <span id="storageInfo">Loading...</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="home-section">
                    <h3 class="section-title">Curious?</h3>
                    <div class="faq-container">
                        <div class="faq-item">
                            <div class="faq-question">Is it possible to bypass without sending a notification?</div>
                            <div class="faq-answer">No. Most network control software uses a heartbeat or real-time traffic monitoring system to detect new devices. These systems usually work directly with the router to track activity as it happens.</div>                            
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">Will there ever be a way to mask or hide devices?</div>
                            <div class="faq-answer">Not reliably. Network management tools detect devices either through active heartbeat checks or by passively watching for any traffic. If your device sends or receives any data, it will show up in the tool.</div>                            
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">Could you just write some code that will unpause a device?</div>
                            <div class="faq-answer">No... That just isnt possible. When a device is paused, the router is told to block all incoming and outgoing traffic based on that device's mac or IP. No code running on the device can bypass that block if the router is enforcing it correctly.</div>       
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">How does blocking or pausing a device actually work?</div>
                            <div class="faq-answer">Most network control systems block devices at Layer 2 using the mac address or at Layer 3 using the IP address. If blocked at Layer 2, the router will drop all traffic to and from the device based on its mac. If blocked at Layer 3, the router may refuse to give the device an IP address or block traffic from its current one. In both cases, traffic is silently dropped and the device cannot access the network.</div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">How do you change your mac address on a phone?</div>
                            <div class="faq-answer">The only reliable way to force a new mac address on iOS is by doing a full network settings reset (or by changing your 'Private Wi-Fi Address' from on to off as long that mac isnt paused/blocked). idk how to on android. You could also just hotspot from your computer to your device and youll have internet.</div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">Why does changing my mac address give me internet?</div>
                            <div class="faq-answer">When you change your mac address and your router is using layer 2 based network blocking/pausing, a new mac address will make you appear as a completely new device. While if your network uses layer 3 blocking (since this is ip based) this bypassing method wont work</div>
                        </div>
                    </div>
                </div>  
                <div class="home-section">
                    <h3 class="section-title">About</h3>
                    <div class="about-container">
                        <div class="about-content">
                            <p>This tool was developed by countervolts (._ayo)</p>
                            <p>The source code can be found on <a href="https://github.com/countervolts/network-related-thing" target="_blank" class="about-link">GitHub</a>.</p>
                            <p>Discord: ._ayo</p> <a href="https://discord.gg/wXMba3mw5B" target="_blank" class="about-link">Discord server</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="scannerView" class="view" style="display: none;">
            <div class="controls">
                <h1 id="scanner" style="color: white;">Network Scanner</h1>
                <div class="buttons">
                    <button id="basicScanBtn" class="scan-btn">Basic Scan</button>
                    <button id="fullScanBtn" class="scan-btn">Full Scan</button>
                    <button id="disableBtn" class="scan-btn" disabled>Disable</button>
                    <button id="enableBtn" class="scan-btn" disabled>Enable</button>
                </div>
                <span id="lastScanTimestamp" class="timestamp">- Previous scan: Not yet performed</span>
            </div>
            <div class="results-and-disabled">
                <div id="resultsContainer" class="results-container">
                    <div class="results-header">
                        <div>IP Address</div>
                        <div>MAC Address</div>
                        <div>Hostname</div>
                        <div>Vendor</div>
                    </div>
                    <div id="resultsBody" class="results-body"></div>
                </div>
                <div class="disabled-devices">
                    <h3>Disabled Devices</h3>
                    <div id="disabledDevices" class="device-box"></div>
                </div>
            </div>
        </div>

        
        <div id="bypassView" class="view" style="display: none;">
            <h1 id="bypass">MAC Address Bypass</h1>
            <div class="bypass-section">
                <h2>Select Network Adapter</h2>
                <div id="adapterList" class="adapter-list"></div>
                <div id="statusMessage" class="status-message" style="display: none;"></div>
            </div>
        </div>

        
        <div id="historyView" class="view" style="display: none;">
            <h1>History</h1>
            <div class="history-container">
                <div class="scan-history">
                    <h2>Scan History</h2>
                    <div id="scanHistoryList" class="history-list"></div>
                </div>
                <div class="bypass-history">
                    <h2>Bypass History</h2>
                    <div id="bypassHistoryList" class="history-list"></div>
                </div>
            </div>
        </div>

        
        <div id="visualizerView" class="view" style="display: none;">
            <h1>Network Visualizer</h1>
            <div class="visualizer-container">
                <div id="networkGraph" class="network-graph"></div>
                <div id="deviceDetails" class="device-details">
                    <h3>Device Details</h3>
                    <div id="deviceDetailsContent">
                        <p class="details-prompt">Click on a device to view details</p>
                    </div>
                </div>
            </div>
        </div>

        
        <div id="settingsView" class="view" style="display: none;">
            <h1>Settings</h1>
            <div class="settings-section">
                <div class="section-title">General</div>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label for="hideWebsiteToggle" class="setting-label">
                            <span>Hide Website</span>
                            <p class="setting-description">If enabled, only the creator can access the website. Unauthorized users will be redirected.</p>
                        </label>
                        <input type="checkbox" id="hideWebsiteToggle" class="toggle">
                    </div>
                    <div class="setting-item">
                        <label for="autoOpenToggle" class="setting-label">
                            <span>Auto Open Page</span>
                            <p class="setting-description">If enabled, the website will automatically open in your browser when the server starts.</p>
                        </label>
                        <input type="checkbox" id="autoOpenToggle" class="toggle">
                    </div>
                    <div class="setting-item">
                        <label for="runAsAdminToggle" class="setting-label">
                            <span>Run as Admin</span>
                            <p class="setting-description">If enabled, the application will run with administrative privileges whenever it is started.</p>
                        </label>
                        <input type="checkbox" id="runAsAdminToggle" class="toggle">
                    </div>
                    <div class="setting-item">
                        <label for="preserveHotspotToggle" class="setting-label">
                            <span>Preserve Hotspot</span>
                            <p class="setting-description">If enabled, your hotspot will remain running when the program stops. If disabled, the hotspot will be stopped during shutdown.</p>
                        </label>
                        <input type="checkbox" id="preserveHotspotToggle" class="toggle">
                    </div>
                </div>
                <div class="section-title">Bypass</div>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label for="bypassModeDropdown" class="setting-label">
                            <div class="setting-header">
                                <span>Bypass Mode</span>
                                <div class="inline-info-icon" id="bypassModeInfo">?</div>
                            </div>
                            <p class="setting-description">Select the method to use for bypassing (commands or Registry).</p>
                        </label>
                        <select id="bypassModeDropdown" class="dropdown">
                            <option value="registry" selected>Registry</option>
                            <option value="cmd">CMD</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="hardwareRngToggle" class="setting-label">
                            <span>Hardware Level Randomization</span>
                            <p class="setting-description">Uses your hardware to generate truly random strings that are used in the mac address, the this does nothing other than being truly random. Using this requires a Intel cpu from atleast 2012 and or a AMD cpu from 2015.</p>
                        </label>
                        <input type="checkbox" id="hardwareRngToggle" class="toggle">
                    </div>
                </div>
                <div class="section-title">Developer Settings</div>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label for="debugModeDropdown" class="setting-label">
                            <span>Debug Mode</span>
                            <p class="setting-description">Select the level of debug information to display in the server logs (No restart required).</p>
                        </label>
                        <select id="debugModeDropdown" class="dropdown">
                            <option value="off">Off</option>
                            <option value="basic">Basic</option>
                            <option value="full">Full</option>
                        </select>
                    </div>
                </div>
                <button id="applySettingsBtn" class="apply-btn">Apply Changes</button>
            </div>
        </div>

        
        <div id="miscView" class="view" style="display: none;">
            <h1>Miscellaneous</h1>
            <div id="miscContent">
                <div class="misc-section">
                    <h3 class="section-title">System Maintenance</h3>
                    <div class="misc-grid">
                        <div class="setting-item compact">
                            <label class="setting-label">
                                <span>Clear Console</span>
                                <p class="setting-description">Clears the console output to improve readability.</p>
                            </label>
                            <button id="clearConsoleBtn" class="apply-btn">Clear Console</button>
                        </div>
                        
                        <div class="setting-item compact">
                            <label class="setting-label">
                                <span>Network Adapters</span>
                                <p class="setting-description">Restart network adapters to resolve connection issues.</p>
                            </label>
                            <button id="restartAdaptersBtn" class="apply-btn">Restart Network Adapters</button>
                        </div>
                    </div>
                </div>
                <div class="misc-section">
                    <h3 class="section-title">Data Management</h3>
                    <div class="setting-item">
                        <label class="setting-label">
                            <span>Clear Local Storage</span>
                            <p class="setting-description">Clears all data stored in the browser's local storage. (Whatever is shown in scanner/visualizer currently will be removed)</p>
                        </label>
                        <button id="clearLocalStorageBtn" class="apply-btn">Clear Local Storage</button>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">
                            <span>Clear History</span>
                            <p class="setting-description">Select the type of history to clear. (All history can be viewed if you click "Open Storage Folder")</p>
                        </label>
                        <div class="control-row">
                            <select id="clearHistoryDropdown" class="dropdown1">
                                <option value="scan">Scan History</option>
                                <option value="bypass">Bypass History</option>
                                <option value="all">All History</option>
                            </select>
                            <div class="button-group">
                                <button id="clearHistoryBtn" class="apply-btn">Clear Selected History</button>
                                <button id="openHistoryFolderBtn" class="apply-btn">Open Storage Folder</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Resources Section -->
                <div class="misc-section">
                    <h3 class="section-title">Resources</h3>
                    <div class="setting-item">
                        <label class="setting-label">
                            <span>Download OUI File</span>
                            <p class="setting-description">Downloads the "latest" OUI file for vendor lookups. Required for identifying device manufacturers in full scans.</p>
                        </label>
                        <button id="downloadOuiBtn" class="apply-btn">Download OUI File (6 MB)</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="hotspotView" class="view" style="display: none;">
            <h1>Mobile Hotspot</h1>
            <div class="hotspot-container">
                <div class="hotspot-status-panel">
                    <div class="status-indicator">
                        <span id="hotspotStatusText">Checking status...</span>
                        <div id="hotspotStatusIcon" class="status-icon"></div>
                    </div>
                    <button id="toggleHotspotBtn" class="hotspot-btn">Enable Hotspot</button>
                </div>
                
                <div class="hotspot-setup-panel">
                    <h3>Hotspot Settings</h3>
                    <div class="setting-item">
                        <label for="hotspotName" class="setting-label">Network Name (SSID)</label>
                        <input type="text" id="hotspotName" class="hotspot-input" placeholder="Enter network name">
                    </div>
                    <div class="setting-item">
                        <label for="hotspotPassword" class="setting-label">Password (8+ characters)</label>
                        <input type="text" id="hotspotPassword" class="hotspot-input" placeholder="Enter password">
                    </div>
                    <button id="saveHotspotSettingsBtn" class="apply-btn">Save Settings</button>
                </div>
                
                <div class="connected-devices-panel">
                    <h3>Connected Devices</h3>
                    <div id="connectedDevicesList" class="connected-devices-list">
                        <div class="no-devices-message">No devices connected</div>
                    </div>
                </div>
                
                <div class="device-control-panel" style="display: none;"> <!-- too lazy to rename -->
                    <h3>Device Info</h3>
                    <div id="selectedDeviceInfo" class="selected-device-info"></div>
                </div>
            </div> 
        </div>

        <div id="updaterView" class="view" style="display: none;">
            <h1>Update Manager</h1>
            <div class="updater-container">
                <div class="update-info">
                    <div class="version-container">
                        <div class="version-box">
                            <div class="version-label">Current Version</div>
                            <div id="currentVersion" class="version-number">Loading...</div>
                        </div>
                        <div class="version-box">
                            <div class="version-label">Latest Version</div>
                            <div id="latestVersion" class="version-number">Checking...</div>
                        </div>
                    </div>
                    
                    <div class="update-status-container">
                        <div id="updateStatus" class="status checking">Checking for updates...</div>
                    </div>
                    
                    <div class="update-actions">
                        <button id="checkUpdateBtn" class="update-btn check-btn">Check for Updates</button>
                        <button id="downloadUpdateBtn" class="update-btn download-btn" disabled>Download Update</button>
                    </div>
                    
                    <div id="updateProgressContainer" class="progress-container" style="display: none;">
                        <div class="progress-bar-container">
                            <div id="updateProgressBar" class="progress-bar"></div>
                        </div>
                        <div id="updateProgressText" class="progress-text">Starting download...</div>
                    </div>
                </div>
                
                <div class="changelog-section">
                    <h2>Changelog</h2>
                    <div id="changelogContainer" class="changelog-container">
                        <p>No changelog information available. Click "Check for Updates" to load the latest information.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="monitorView" class="view" style="display: none;">
            <h1>Connection Monitor</h1>
            <div class="monitor-container">
                <div class="monitor-header">
                    <div class="monitor-controls">
                        <select id="adapterSelector" class="adapter-dropdown">
                            <option value="all">All Adapters</option>
                            <!-- Will be populated with available network adapters -->
                        </select>
                        <button id="refreshConnectionsBtn" class="monitor-btn">Refresh</button>
                        <div class="auto-refresh">
                            <input type="checkbox" id="autoRefreshToggle" class="toggle">
                            <label for="autoRefreshToggle">Auto refresh</label>
                        </div>
                    </div>
                    <div class="monitor-stats">
                        <span id="connectionCount">0 connections</span>
                        <span id="lastRefreshTime"></span>
                    </div>
                </div>
                
                <div class="connections-container">
                    <div class="connections-header">
                        <div class="connection-col process-col">Process</div>
                        <div class="connection-col duration-col">Duration</div>
                        <div class="connection-col dest-col">Destination</div>
                        <div class="connection-col type-col">Type</div>
                        <div class="connection-col actions-col">Actions</div>
                    </div>
                    <div id="connectionsBody" class="connections-body">
                        <!-- Connection items will be added here dynamically -->
                    </div>
                </div>
                
                <div id="whoisPanel" class="whois-panel" style="display: none;">
                    <div class="whois-header">
                        <h3>WHOIS Information</h3>
                        <button id="closeWhoisBtn" class="close-btn">×</button>
                    </div>
                    <div id="whoisContent" class="whois-content">
                        <div class="loading-spinner"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="confirmationModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Confirm Changes</h2>
            <p>The following changes will be applied:</p>
            <ul id="changesList" class="changes-list"></ul>
            <div class="modal-actions">
                <button id="confirmBtn" class="modal-btn confirm">Yes</button>
                <button id="cancelBtn" class="modal-btn cancel">No</button>
            </div>
        </div>
    </div>

    <div id="notificationContainer" class="notification-container"></div>
    <div class="version">v1.4</div>

    <script src="src/scanner/app.js"></script>
    <script src="src/settings/settings.js"></script>
    <script src="src/misc/misc.js"></script>
    <script src="src/bypass/yep.js"></script>
    <script src="src/history/tracker.js"></script>
    <script src="src/visualizer/visualizer.js"></script>
    <script src="src/hotspot/hahaspot.js"></script>
    <script src="src/home/home.js"></script>
    <script src="src/updater/updating.js"></script>
    <script src="src/monitor/monitoring.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            function showViewFromHash() {
                const hash = window.location.hash || '#home';
                const views = {
                    '#home': 'homeView',
                    '#scanner': 'scannerView',
                    '#bypass': 'bypassView',
                    '#history': 'historyView',
                    '#visualizer': 'visualizerView',
                    '#settings': 'settingsView',
                    '#misc': 'miscView',
                    '#hotspot': 'hotspotView',
                    '#updater': 'updaterView',
                    '#monitor': 'monitorView'
                };
            
                Object.values(views).forEach(viewId => {
                    document.getElementById(viewId).style.display = 'none';
                });
                const viewId = views[hash];
                if (viewId) {
                    document.getElementById(viewId).style.display = 'block';
                    
                    if (viewId === 'homeView') {
                        if (window.loadStatistics) {
                            window.loadStatistics();
                        }
                        if (window.loadSystemInfo) {
                            window.loadSystemInfo();
                        }
                    }
                }
            }
        
            function updateActiveNavLink() {
                const hash = window.location.hash || '#home';
                
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                const activeLink = document.querySelector(`a[href="${hash}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
            }
            
            window.addEventListener('hashchange', () => {
                showViewFromHash();
                updateActiveNavLink();
            });
            
            showViewFromHash();
            updateActiveNavLink();
        });

        document.addEventListener('DOMContentLoaded', () => {
            const dropdownHeaders = document.querySelectorAll('.dropdown-header');
            
            dropdownHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    header.classList.toggle('active');
                    
                    const content = header.nextElementSibling;
                    content.classList.toggle('show');
                });
            });
            
            function openActiveDropdown() {
                const hash = window.location.hash || '#home';
                
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                const activeLink = document.querySelector(`a[href="${hash}"]`);
                
                if (activeLink) {
                    activeLink.classList.add('active');
                    
                    const parentDropdown = activeLink.closest('.dropdown-content');
                    if (parentDropdown) {
                        parentDropdown.classList.add('show');
                        const header = parentDropdown.previousElementSibling;
                        if (header) {
                            header.classList.add('active');
                        }
                    }
                }
            }
            
            openActiveDropdown();
            window.addEventListener('hashchange', openActiveDropdown);
        });
    </script>
</body>
</html>